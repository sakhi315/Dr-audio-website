<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr. Audio</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
      Dr. Audio
    </header>
    <nav>
        <a href="index.html">Home</a>
        <a href="podcast.html">Podcast</a>
        <a href="blog.html">Blog</a>
        <a href="resources.html">Resources</a>
        <a href="contact.html">Contact</a>
        <a href="research.html">Research & Background</a> <!-- NEW TAB -->
    </nav>    

    <section class="hero">
    <div class="hero-content">
        <div class="hero-text">
            <h1>Welcome to Dr. Audio</h1>
            <p>Join Dr. Sean Young and his children, Melody and Maverick, as they interview high-achieving individuals 
               on the <strong>Young and Hungry Podcast</strong>. Get expert insights to help parents, teachers, and students 
               succeed in education and beyond.</p>
            <a href="podcast.html" class="cta-button">Listen to the Podcast</a>
        </div>
        <div class="hero-image">
            <img src="dr-young.jpg" alt="Dr. Sean Young">
        </div>
    </div>
</section>

    <!-- About Us Section -->
<section class="about-us">
    <div class="about-content">
        <h2>About Us</h2>
        <p>Dr. Sean Young and his children, Melody and Maverick, host the <strong>Young and Hungry Podcast</strong>, 
           where they interview high-achieving individuals. Our mission is to empower parents and teachers with insights 
           to help children succeed in their chosen fields.</p>
    </div>
</section>

    <section class="content">
        <h2>What is Dr. Audio?</h2>
        <p>Helping teachers and parents support children's learning and motivation through insightful podcasts and engaging discussions.</p>
        <button id="learnMore">Learn More</button>
    </section>
    
    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>About Dr. Audio</h2>
            <p>Dr. Audio is an initiative aimed at providing parents and teachers with the necessary tools to encourage children’s learning through audio-based resources, interactive discussions, and expert insights.</p>
        </div>
    </div>
    
    <div class="container">
        <div class="grid">
            <div class="card">
                <h3>Podcast</h3>
                <p>Listen to expert discussions on education and motivation.</p>
            </div>
            <div class="card">
                <h3>Blog</h3>
                <p>Read insights from parents and teachers.</p>
            </div>
            <div class="card">
                <h3>Live Speakers</h3>
                <p>Engage with guest educators and specialists.</p>
            </div>
        </div>
    </div>

<!-- Newsletter Signup Modal -->
<div id="newsletter-modal" class="modal">
    <div class="modal-content">
        <span id="close-newsletter-modal" class="close">&times;</span> <!-- Updated ID -->
        <h2>Join Our Newsletter</h2>
        <p>Stay updated with our latest podcasts, blogs, and events!</p>
        <form id="newsletter-form">
            <input type="email" id="newsletter-email" placeholder="Enter your email" required>
            <button type="submit">Subscribe</button>
        </form>
    </div>
</div>

<section class="cta-section">
    <h2>Stay Updated</h2>
    <p>Subscribe to our newsletter and never miss an episode!</p>
    <form id="cta-newsletter-form">
        <input type="email" id="cta-newsletter-email" placeholder="Enter your email" required>
        <button type="submit">Subscribe</button>
    </form>
</section>

<!-- Footer -->
<footer>
    &copy; 2025 Dr. Audio. All rights reserved.
</footer>

<script>
        document.getElementById('learnMore').addEventListener('click', function() {
            document.getElementById('modal').style.display = 'block';
        });
    
        document.querySelector('.close').addEventListener('click', function() {
            document.getElementById('modal').style.display = 'none';
        });
    
    document.addEventListener("DOMContentLoaded", function () {
        console.log("JavaScript Loaded Successfully!"); // Debugging

        const modal = document.getElementById("newsletter-modal");
        const closeModal = document.getElementById("close-newsletter-modal"); // Fix: Ensure correct "X" button
        const navLinks = document.querySelectorAll("nav a");
        const newsletterForm = document.getElementById("newsletter-form");
        const podcastButton = document.querySelector(".cta-button"); // "Listen to Podcast" button
        let nextPage = "";

        if (!modal) {
            console.error("ERROR: Newsletter modal not found in the document!");
        } else {
            console.log("Modal Found:", modal);
        }

        // ✅ Check if the user has already subscribed
        let hasSubscribed = localStorage.getItem("subscribed");
        console.log("Has Subscribed Status:", hasSubscribed); // Debugging

        // ✅ Function to open the modal and store the clicked page link
        function openModal(event) {
            event.preventDefault();
            nextPage = this.href || this.dataset.link; // Store the clicked link

            console.log("Clicked Link:", nextPage); // Debugging

            // ✅ If the user has already signed up OR is clicking "Home", go directly to the page
            if (hasSubscribed === "true" || nextPage.includes("index.html")) {
                console.log("User already subscribed, navigating to:", nextPage);
                window.location.href = nextPage;
                return;
            }

            console.log("Opening Newsletter Modal...");
            modal.style.display = "block";

            // Force visibility check
            if (modal.style.display === "block") {
                console.log("SUCCESS: Modal is now visible.");
            } else {
                console.error("ERROR: Modal is still hidden!");
            }
        }

        // ✅ Attach event listener to all navigation links (except Home)
        navLinks.forEach(link => {
            if (!link.href.includes("index.html")) {
                console.log("Adding Click Listener to:", link.href);
                link.addEventListener("click", openModal);
            }
        });

        // ✅ Ensure the "Listen to Podcast" button also triggers the modal
        if (podcastButton) {
            podcastButton.dataset.link = "podcast.html";
            podcastButton.addEventListener("click", openModal);
        }

        // ✅ Fix: Ensure "X" button closes the modal properly
        closeModal.addEventListener("click", function () {
            console.log("Closing Modal");
            modal.style.display = "none";
        });

        // ✅ Ensure clicking outside the modal closes it
        window.addEventListener("click", function (event) {
            if (event.target === modal) {
                console.log("Clicked Outside, Closing Modal");
                modal.style.display = "none";
            }
        });

        // ✅ Handle newsletter form submission & redirect
        newsletterForm.addEventListener("submit", function (event) {
            event.preventDefault();
            let email = document.getElementById("newsletter-email").value;

            console.log("User Subscribed:", email); // Debugging

            // ✅ Store in localStorage that the user has subscribed
            localStorage.setItem("subscribed", "true");
            hasSubscribed = "true";

            alert("Thank you for subscribing, " + email + "!");

            // ✅ Close modal after submission
            modal.style.display = "none";

            // ✅ Redirect user to the original page
            if (nextPage) {
                console.log("Redirecting to:", nextPage);
                window.location.href = nextPage;
            }
        });
    });
</script>


</body>

</html>
